<div class="friend-requests-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Äang táº£i lá»i má»i...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <span class="error-icon">âš ï¸</span>
    <p>{{ error }}</p>
    <button class="btn-retry" (click)="loadRequests()">Thá»­ láº¡i</button>
  </div>

  <!-- Content -->
  <div *ngIf="!loading && !error" class="requests-content">
    <!-- Received Requests Section -->
    <div class="requests-section">
      <div class="section-header">
        <h2 class="section-title">
          ğŸ“¨ Lá»i má»i Ä‘Ã£ nháº­n
          <span class="badge">{{ receivedRequests.length }}</span>
        </h2>
      </div>

      <div *ngIf="receivedRequests.length === 0" class="empty-state">
        <span class="empty-icon">ğŸ“­</span>
        <h3>KhÃ´ng cÃ³ lá»i má»i nÃ o</h3>
        <p>Khi cÃ³ lá»i má»i káº¿t báº¡n má»›i, nÃ³ sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y</p>
      </div>

      <div *ngIf="receivedRequests.length > 0" class="requests-list">
        <div
          *ngFor="let request of receivedRequests"
          class="request-card received"
        >
          <div class="request-avatar">
            <img
              [src]="getAvatarUrl(request.senderAvatarUrl)"
              [alt]="request.senderFullName"
              class="avatar-image"
            />
          </div>

          <div class="request-info">
            <h3 class="request-name">{{ request.senderFullName || request.senderUsername }}</h3>
            <p class="request-username">@{{ request.senderUsername }}</p>
            <p *ngIf="request.message" class="request-message">"{{ request.message }}"</p>
            <p class="request-date">{{ formatDate(request.createdAt) }}</p>
          </div>

          <div class="request-actions">
            <button
              class="btn-accept"
              (click)="acceptRequest(request.id)"
              title="Cháº¥p nháº­n lá»i má»i"
            >
              <span class="btn-icon">âœ…</span>
              Cháº¥p nháº­n
            </button>
            <button
              class="btn-reject"
              (click)="rejectRequest(request.id)"
              title="Tá»« chá»‘i lá»i má»i"
            >
              <span class="btn-icon">âŒ</span>
              Tá»« chá»‘i
            </button>
            <button
              class="btn-profile"
              (click)="viewProfile(request.senderId)"
              title="Xem há»“ sÆ¡"
            >
              <span class="btn-icon">ğŸ‘¤</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Sent Requests Section -->
    <div class="requests-section">
      <div class="section-header">
        <h2 class="section-title">
          ğŸ“¤ Lá»i má»i Ä‘Ã£ gá»­i
          <span class="badge">{{ sentRequests.length }}</span>
        </h2>
      </div>

      <div *ngIf="sentRequests.length === 0" class="empty-state">
        <span class="empty-icon">ğŸ“¤</span>
        <h3>ChÆ°a gá»­i lá»i má»i nÃ o</h3>
        <p>TÃ¬m vÃ  káº¿t báº¡n vá»›i ngÆ°á»i dÃ¹ng má»›i nhÃ©!</p>
        <a routerLink="/friends" routerLinkActive="active" class="btn-find-friends">
          ğŸ” TÃ¬m báº¡n má»›i
        </a>
      </div>

      <div *ngIf="sentRequests.length > 0" class="requests-list">
        <div
          *ngFor="let request of sentRequests"
          class="request-card sent"
        >
          <div class="request-avatar">
            <img
              [src]="'/assets/default-avatar.svg'"
              [alt]="request.receiverFullName"
              class="avatar-image"
            />
          </div>

          <div class="request-info">
            <h3 class="request-name">{{ request.receiverFullName || request.receiverUsername }}</h3>
            <p class="request-username">@{{ request.receiverUsername }}</p>
            <p *ngIf="request.message" class="request-message">"{{ request.message }}"</p>
            <p class="request-date">{{ formatDate(request.createdAt) }}</p>
          </div>

          <div class="request-actions">
            <button
              class="btn-cancel"
              (click)="cancelRequest(request.id)"
              title="Há»§y lá»i má»i"
            >
              <span class="btn-icon">âŒ</span>
              Há»§y
            </button>
            <button
              class="btn-profile"
              (click)="viewProfile(request.receiverId)"
              title="Xem há»“ sÆ¡"
            >
              <span class="btn-icon">ğŸ‘¤</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

